-# = render 'layouts/header'
= render 'shared/niches/header', niche: @niche

%div{class: "mt-10 flex justify-center pb-10"}
  %div{class: "max-w-screen-lg w-full flex"}
    %div{class: "w-2/3 pr-12"}
      - if @niche.tags.present?
        %div{class: "flex items-center #{params[:tag].present? ? "text-base" : "text-xs pb-4"}"}
          %h2{class: "font-semibold pb-4 flex-shrink-0"}
            Tags:
          - if params[:tag]
            %div{class: "flex-shrink-0 text-black mr-1 ml-3 pb-4 font-medium"}
              = params[:tag]
          %div{class: "ml-3 space-x-4 overflow-x-scroll flex items-center pb-4"}
            - @niche.tags.each do |tag|
              = link_to_unless_current(tag.name, [@niche, tag: tag.name], class: "flex-shrink-0 text-gray-600 hover:text-black") do end
      - if params[:tag]
        = render partial: "solutions/niche_preview", collection: @solutions, as: :solution, cached: true
      - else
        - if @solutions.any?
          - if @solutions.today.any?
            %h2{class: "w-full font-bold text-2xl mb-6 leading-none"}
              Today
            = render partial: "solutions/niche_preview", collection: @solutions.today, as: :solution, cached: true
            %div{class: "mt-6"}
          - if @solutions.past_week.any?
            %h2{class: "w-full font-bold text-2xl mb-6 leading-none"}
              Past Week
            = render partial: "solutions/niche_preview", collection: @solutions.past_week, as: :solution, cached: true
            %div{class: "mt-6"}
          - if @solutions.past_month.any?
            %h2{class: "w-full font-bold text-2xl mb-6 leading-none"}
              Past Month
            = render partial: "solutions/niche_preview", collection: @solutions.past_month, as: :solution, cached: true
        - else
          %div{class: "w-full flex flex-col items-center"}
            - if user_signed_in?
              %div{"data-controller": 'toggle'}
                %div{"data-toggle-target": 'toggleable', class: "mb-4"}
                  = image_tag "https://media.giphy.com/media/dy4swYs1dp430jChRa/giphy.gif", class: "h-64 w-80 object-cover"
                %div{"data-toggle-target": 'toggleable', class: "mb-4 hidden"}
                  -# = image_tag "https://media.giphy.com/media/b5LTssxCLpvVe/giphy.gif"
                  = image_tag "https://media.giphy.com/media/bTzFnjHPuVvva/giphy.gif", class: "h-64 w-80 object-cover"
                %div{class: "mt-4 w-full font-semibold text-xl leading-none text-center"}
                  No solutions yet ðŸ˜”

                  %div{class: "w-full text-center mt-3 cursor-pointer", "data-action": 'mouseover->toggle#toggle'}
                    = link_to "Have a solution to share?", new_solution_path(code: @niche.code),  class: "flex-shrink-0 border-b-3 border-secondary px-0.5 text-xl font-medium leading-4 transition-all hover:bg-secondary hover:text-white pt-1 tracking-wide"
            - else
              %div{class: "mt-4 w-full font-semibold text-2xl leading-none text-center"}
                No solutions yet ðŸ˜”
              -# %div{class: "mt-8 w-full text-lg text-center mt-3 cursor-pointer"}
              -#   = "Get notified when solutions are posted to this #{niche_type.downcase} ðŸ‘‡"
              -# %div{class: "flex w-1/4"}
              -#   %input{class: "border-b border-secondary mt-2 w-full px-2 bg-transparent text-gray-900 focus:outline-none py-0.5",
              -#         placeholder: "something@example.com"}
              -#   %button{class: "flex-shrink-0 px-2 py-1 bg-secondary text-white"}
            -#   Notify me!
          -# %div{class: "mt-1"}
          -# = link_to "Create a new solution", new_solution_path, class: "text-blue-500 hover:underline"





    %div{class: "w-1/3 flex-shrink-0 flex flex-wrap"}
      %div{class: "w-full flex flex-wrap rounded-sm"}
        %div{class: ""}
          %div{class: " py-3 px-4 bg-white border border-gray-400 rounded"}
            %div{class: "flex justify-between"}
              %h2{class: "w-full text-base font-bold text-sm text-gray-900"}
                = "About #{niche_type}"
              - if user_signed_in?
                - if current_user.following?(@niche)
                  = link_to "Following", [:unfollow, @niche], class: "flex-shrink-0 border-b-3 border-secondary px-0.5 text-sm font-medium leading-4 transition-all hover:bg-secondary hover:text-white pt-1 tracking-wide"
                - else
                  = link_to "Follow Niche", [:follow, @niche], class: "flex-shrink-0 border-b-3 border-secondary px-0.5 text-sm font-medium leading-4 transition-all hover:bg-secondary hover:text-white pt-1 tracking-wide"
            %div{class: "mt-1 py-3 w-full rounded-lg text-sm"}
              = simple_format @niche.description.gsub(/\n/, '<br/>').html_safe
